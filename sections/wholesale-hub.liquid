<section class="page-width">
  <div class="rte">
    <h1>{{ section.settings.heading }}</h1>
    {{ section.settings.intro }}
  </div>

  <div class="wh-grid">
    <div class="wh-card">
      <a class="wh-btn" href="{{ section.settings.faire_url | default: '/pages/wholesale-hub' }}" target="_blank" rel="noopener">
        {{ section.settings.faire_button | default: 'Open Faire Portal' }}
      </a>
      <h2>Order on Faire</h2>

      {% if section.settings.faire_terms != blank %}
        <div class="wh-terms">
          <div class="rte">{{ section.settings.faire_terms }}</div>
        </div>
      {% endif %}

      {% if section.settings.faire_embed != blank %}
        <div class="wh-faire-embed">
          {{ section.settings.faire_embed }}
        </div>
      {% endif %}
    </div>

    <div class="wh-card">
      <a class="wh-btn" href="{{ section.settings.direct_url | default: '/pages/b2b-login' }}">
        {{ section.settings.direct_button | default: 'Go to Wholesale Login' }}
      </a>
      {%- comment -%} Secondary login + catalog buttons (debug-hardened) {%- endcomment -%}
      <div class="mt-2 space-y-2">
        {%- if customer and customer.tags contains 'b2b' -%}
          <a href="{{ section.settings.direct_start_url | default: '/' }}"
             class="button button--secondary">
            {{ section.settings.direct_start_label | default: 'Start shopping' }}
          </a>
        {%- else -%}
          <a href="{{ section.settings.direct_login_url | default: '/pages/b2b-login#login' }}"
             class="button button--secondary">
            {{ section.settings.direct_login_label | default: 'Already registered? Log in' }}
          </a>
        {%- endif -%}

        {%- if section.settings.show_catalog_button -%}
          <a class="button button--tertiary" href="{{ section.settings.catalog_url | default: '/pages/wholesale-catalog' }}">
            {{ section.settings.catalog_button | default: 'Get Catalog' }}
          </a>
        {%- endif -%}
      </div>
      <h2>Register to buy direct</h2>

      {% if section.settings.direct_terms != blank %}
        <div class="wh-terms">
          <div class="rte">{{ section.settings.direct_terms }}</div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<style>
  .wh-faire-embed { margin: 1rem 0; }
  .wh-card { padding: 1.5rem; border: 1px solid rgba(0,0,0,.08); border-radius: 14px; }
  .wh-grid { display:grid; grid-template-columns: 1fr; gap: 1.25rem; }
  .wh-terms { margin:.75rem 0 1rem; }
  @media (min-width: 768px) {
    .wh-grid { grid-template-columns: 1fr 1fr; }
  }
  .wh-btn,
  .wh-btn:link,
  .wh-btn:visited,
  .wh-btn:focus,
  .wh-btn:focus-visible,
  .wh-btn:hover,
  .wh-btn:active {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    -webkit-appearance: none;
    appearance: none;
    text-decoration: none;
  }
  .wh-btn {
    display: inline-block;
    padding: .75rem 1.25rem;
    border-radius: 999px;
    background-color: #000;
    color: #fff;
    text-align: center;
    line-height: 1;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    margin-bottom: .75rem;
  }
  .wh-btn:hover { background-color: #333; }
  .wh-btn:active { transform: translateY(1px); }
  .wh-btn::before, .wh-btn::after { content: none !important; }
</style>

{% schema %}
{
  "name": "Wholesale Hub (v2)",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Wholesale" },
    { "type": "richtext", "id": "intro", "label": "Intro", "default": "<p>Choose how youâ€™d like to order wholesale.</p>" },
    { "type": "text", "id": "faire_button", "label": "Faire button label", "default": "Open Faire Portal" },
    { "type": "url",  "id": "faire_url",    "label": "Faire button link" },
    { "type": "textarea", "id": "faire_embed", "label": "Faire embed code (optional widget)" },
    { "type": "text", "id": "direct_button", "label": "Direct button label", "default": "Go to Wholesale Login" },
    { "type": "url",  "id": "direct_url",    "label": "Direct button link" },

    { "type": "text", "id": "direct_login_label", "label": "Login button label", "default": "Already registered? Log in" },
    { "type": "url",  "id": "direct_login_url", "label": "Login button URL", "default": "/pages/b2b-login#login" },
    { "type": "text", "id": "direct_start_label", "label": "Approved (B2B) button label", "default": "Start shopping" },
    { "type": "url",  "id": "direct_start_url", "label": "Approved (B2B) start URL", "default": "/" },

    { "type": "checkbox", "id": "show_catalog_button", "label": "Show Catalog button", "default": true },
    { "type": "text",     "id": "catalog_button",      "label": "Catalog button label", "default": "Get Catalog" },
    { "type": "url",      "id": "catalog_url",         "label": "Catalog button link", "default": "/pages/wholesale-catalog" },

    { "type": "richtext", "id": "faire_terms", "label": "Faire incentives (left card)" },
    { "type": "richtext", "id": "direct_terms", "label": "Direct B2B terms (right card)" }
  ],
  "presets": [
    { "name": "Wholesale Hub (v2)" }
  ]
}
{% endschema %}
