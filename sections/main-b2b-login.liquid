{%- assign is_b2b = customer and customer.tags contains 'b2b' -%}

<section class="section section--b2b-login page-width">
  {%- if customer -%}
    {%- if is_b2b -%}
      <div class="b2b-approved">
        <h1>Welcome back!</h1>
        <p>Your wholesale account is approved.</p>
        <a class="button button--primary" href="/">Start Shopping</a>
      </div>
    {%- else -%}
      <div class="b2b-pending">
        <h1>Application Pending</h1>
        <p>Thanks for applying. Your account is under review. Questions? Email <a href="mailto:{{ section.settings.contact_email }}">{{ section.settings.contact_email }}</a>.</p>
      </div>
    {%- endif -%}
  {%- else -%}
    <div class="b2b-gate">
      <h1>Wholesale Access</h1>
      <div class="b2b-gate__actions">
        <a class="button button--primary" href="{{ section.settings.apply_url }}">Apply for an Account</a>
        <a class="button" href="{{ section.settings.login_url }}">Log in</a>
      </div>
    </div>
  {%- endif -%}
</section>

<style>
  .section--b2b-login { margin-top: var(--spacing-8, 2rem); text-align:center; }
  .b2b-gate__actions { display:flex; gap:.75rem; justify-content:center; margin:1rem 0; flex-wrap:wrap; }
</style>

{% schema %}
{
  "name": "B2B Login",
  "settings": [
    { "type": "url", "id": "apply_url", "label": "Apply page URL" },
    { "type": "url", "id": "login_url", "label": "Login URL" },
    { "type": "text", "id": "contact_email", "label": "Contact email" }
  ],
  "presets": [
    { "name": "B2B Login" }
  ]
}
{% endschema %}
