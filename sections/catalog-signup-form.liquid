{% comment %}
  Catalog Signup Form (posts to Shopify's contact endpoint)
  Captures name, company, full mailing address, and email.
{% endcomment %}

<section class="page-width section-spacing">
  <div class="prose">
    <h1>{{ section.settings.heading | escape }}</h1>
    {% if section.settings.subheading != blank %}
      <p>{{ section.settings.subheading }}</p>
    {% endif %}
  </div>

  {%- form 'contact', id: 'CatalogSignupForm', class: 'form mt-6' -%}
    {%- if form.posted_successfully? -%}
      <p role="status" class="form__message">
        {{ section.settings.success_message | default: 'Thanks! You’re on the mailing list.' }}
      </p>
    {%- else -%}
      {%- if form.errors -%}
        <div class="form__message" role="alert">
          {{ 'templates.contact.form.error' | t }}
        </div>
      {%- endif -%}

      <div class="grid grid--2-col-desktop grid--1-col">
        <div class="grid__item">
          <label for="ContactName">Full name</label>
          <input id="ContactName" type="text" name="contact[Full name]" required>
        </div>
        <div class="grid__item">
          <label for="ContactCompany">Company / Store</label>
          <input id="ContactCompany" type="text" name="contact[Company]">
        </div>
        <div class="grid__item">
          <label for="ContactEmail">Email</label>
          <input id="ContactEmail" type="email" name="contact[email]" required>
        </div>
        <div class="grid__item">
          <label for="ContactStreet">Street address</label>
          <input id="ContactStreet" type="text" name="contact[Street address]" required>
        </div>
        <div class="grid__item">
          <label for="ContactCity">City</label>
          <input id="ContactCity" type="text" name="contact[City]" required>
        </div>
        <div class="grid__item">
          <label for="ContactState">State / Province</label>
          <input id="ContactState" type="text" name="contact[State]" required>
        </div>
        <div class="grid__item">
          <label for="ContactZip">ZIP / Postal code</label>
          <input id="ContactZip" type="text" name="contact[ZIP]" required>
        </div>
        <div class="grid__item">
          <label for="ContactCountry">Country</label>
          <input id="ContactCountry" type="text" name="contact[Country]" required>
        </div>
      </div>

      {% if section.settings.note %}
        <p class="mt-4 text-subdued">{{ section.settings.note }}</p>
      {% endif %}

      <button type="submit" class="button mt-4">
        {{ section.settings.button_label | default: 'Join the mailing list' }}
      </button>
    {%- endif -%}
  {%- endform -%}
</section>

{% schema %}
{
  "name": "Catalog signup form",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Print Catalog Mailing List" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Tell us where to mail your copy." },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Join the mailing list" },
    { "type": "text", "id": "success_message", "label": "Success message", "default": "Thanks! You’re on the mailing list." },
    { "type": "text", "id": "note", "label": "Small note (optional)", "default": "" }
  ],
  "presets": [{ "name": "Catalog signup form" }]
}
{% endschema %}
