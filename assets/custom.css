/* ================================================
   B2B header + announcement bar (Theme settings)
   Uses CSS variables emitted in theme.liquid
================================================= */
body.b2b .header-wrapper,
body.b2b .section-header,
body.b2b header.header {
  background: var(--b2b-header-bg, #000);
  color: var(--b2b-header-text, #fff);
}
body.b2b .header a,
body.b2b .header .header__menu-item,
body.b2b .header .header__icon,
body.b2b .header .icon {
  color: var(--b2b-header-text, #fff);
  fill: var(--b2b-header-text, #fff);
}
body.b2b .announcement-bar {
  background: var(--b2b-bar-bg, #000);
  color: var(--b2b-bar-text, #fff);
  text-align: center;
}
body.b2b .announcement-bar a.announcement-bar__link {
  color: var(--b2b-bar-text, #fff);
  text-decoration: none;
  display: inline-block;
  padding: 10px 14px;
}

/* ================================================
   Product cards: keep buttons aligned bottom
   Works on home page (featured collections) + collection pages
   Compatible with Dawn (v8–v15+) and SparkLayer widgets
================================================= */

/* 1) Ensure the card grows to full height inside grid items */
.grid__item .card-wrapper,
.grid__item .card {
  height: 100%;
}

/* Make outer product card wrapper a flex column so the card can stretch */
.product-card-wrapper {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* 2) Make the product card a vertical flex stack */
.product-card-wrapper > .card {
  display: flex !important;
  flex-direction: column;
  min-height: 100%;
  flex: 1 1 auto;
}


/* 4) Push the CTA (Quick add / View product / SparkLayer add) to bottom */
.product-card-wrapper .quick-add,
.product-card-wrapper product-form.form,
.product-card-wrapper form[action*="/cart/add"],
.product-card-wrapper .card__cta,
.product-card-wrapper .sl-add-to-cart,           /* SparkLayer button */
.product-card-wrapper .sl-quick-order__add,      /* SparkLayer quick-order buttons (if present in cards) */
.product-card-wrapper .button--full-width {
  margin-top: auto !important;
}

/* If the badge is in normal flow in this theme, don't let it push the CTA up */
.product-card-wrapper .card__badge {
  order: 99;
}

/* 5) Even if the product is OOS and shows a different CTA, keep alignment */


/* 6) Minor polish: keep cards equal height on small screens too */
@media (max-width: 749px) {
  .card--product .card__content,
  .card--product .card__information {
    min-height: 100%;
  }
}

/* ===== Dawn v15 — Product cards: 2-line titles + aligned CTA ===== */
.card--product .card__heading {
  line-height: 1.25;
  min-height: 2.5em;               /* 2 lines × 1.25 */
  display: -webkit-box;
  line-clamp: 2;                   /* standard prop for lint compatibility */
  -webkit-line-clamp: 2;           /* clamp to 2 lines */
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.grid__item .card-wrapper,
.grid__item .card { height: 100%; }
.card--product { display: flex; flex-direction: column; }
.card--product .card__content:last-of-type {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.card--product .card__information { display: flex; flex-direction: column; }
.card--product .card-information { margin-bottom: 0; }
.card--product .quick-add,
.card--product form[action*="/cart/add"],
.card--product .card__cta,
.card--product .sl-add-to-cart,
.card--product .sl-quick-order__add,
.card--product .button--full-width {
  margin-top: auto;
}
@media (max-width: 749px) {
  .card--product .card__content,
  .card--product .card__information { min-height: 100%; }
}

/* ===========================
   Dawn v15 — Cards & B2B Nav
   =========================== */

/* 1) Product cards: reserve exactly two lines for titles so CTAs align */
.card--product .card__heading {
  line-height: 1.25;
  margin-bottom: 0.5rem;             /* normalize spacing */
  min-height: 2.5em;                 /* 2 lines × 1.25 line-height */
  display: -webkit-box;
  line-clamp: 2;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Make card content a column so the CTA can pin to the bottom */
.grid__item .card-wrapper,
.grid__item .card { height: 100%; }
.card--product .card__content,
.card--product .card__information {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Pin all CTA rows/elements to the bottom of the card column */
.card--product .quick-add,
.card--product form[action*="/cart/add"],
.card--product .card__cta,
.card--product .button--full-width,
/* SparkLayer widget container should sit at the bottom as well */
.card--product .sprkl-product-card {
  margin-top: auto;
}

/* Ensure B2B CTAs aren’t hidden by app CSS (safety) */
body.b2b .card--product .quick-add,
body.b2b .card--product form[action*="/cart/add"],
body.b2b .card--product .card__cta,
body.b2b .card--product .sl-add-to-cart,
body.b2b .card--product .sl-quick-order__add,
body.b2b .card--product .sl-cta {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* If you set B2B CTA colors in Header settings, use those variables (fallbacks included) */
body.b2b .card--product .button,
body.b2b .card--product .button--primary {
  background: var(--b2b-cta-bg, #000) !important;
  color: var(--b2b-cta-text, #fff) !important;
  border-color: var(--b2b-cta-bg, #000) !important;
}

/* 2) B2B primary nav: visible hover/rollover (desktop) */
body.b2b .header .list-menu__item--link,
body.b2b .header summary.list-menu__item,
body.b2b .header .header__menu-item {
  color: var(--b2b-header-text, #fff) !important;
}
body.b2b .header .list-menu__item--link:hover,
body.b2b .header summary.list-menu__item:hover,
body.b2b .header .header__menu-item:hover,
body.b2b .header .list-menu__item--link:focus-visible,
body.b2b .header summary.list-menu__item:focus-visible,
body.b2b .header .header__menu-item:focus-visible {
  background: color-mix(in srgb, var(--b2b-header-text, #fff) 16%, transparent);
  border-radius: 6px;
  text-decoration: none !important;
}

/* Mega menu links hover */
body.b2b .mega-menu__link:hover,
body.b2b .mega-menu__link:focus-visible {
  background: color-mix(in srgb, var(--b2b-header-text, #fff) 16%, transparent);
  border-radius: 6px;
  text-decoration: none !important;
  color: var(--b2b-header-text, #fff) !important;
}

/* 3) B2B mobile drawer: readable text + hover feedback */
body.b2b .header .list-menu__item--link,
body.b2b .header summary.list-menu__item,
body.b2b .header .header__menu-item,
body.b2b .menu-drawer .list-menu__item--link,
body.b2b .menu-drawer summary.list-menu__item,
body.b2b .menu-drawer .header__menu-item,
/* cover <li> wrappers used for plain links in drawer */
body.b2b .menu-drawer .menu-drawer__menu-item {
  color: var(--b2b-header-text, #fff) !important;
}
body.b2b .menu-drawer .list-menu__item--link:hover,
body.b2b .menu-drawer summary.list-menu__item:hover,
body.b2b .menu-drawer .header__menu-item:hover,
body.b2b .menu-drawer .list-menu__item--link:focus-visible,
body.b2b .menu-drawer summary.list-menu__item:focus-visible,
body.b2b .menu-drawer .header__menu-item:focus-visible,
/* also apply hover bg when the cursor is over the <li> wrapper */
body.b2b .menu-drawer .menu-drawer__menu-item:hover,
body.b2b .menu-drawer .menu-drawer__menu-item:focus-within {
  background: color-mix(in srgb, var(--b2b-header-text, #fff) 16%, transparent);
  border-radius: 6px;
  text-decoration: none !important;
  color: var(--b2b-header-text, #fff) !important;
}

/* 7) B2B drawer: some Dawn builds color inner containers separately — force them */
body.b2b .menu-drawer,
body.b2b .menu-drawer__inner-container,
body.b2b .menu-drawer__navigation-container,
body.b2b .menu-drawer__menu {
  background: var(--b2b-header-bg, #000) !important;
  color: var(--b2b-header-text, #fff) !important;
}
body.b2b .menu-drawer a,
body.b2b .menu-drawer button,
body.b2b .menu-drawer .icon {
  color: var(--b2b-header-text, #fff) !important;
  fill: var(--b2b-header-text, #fff) !important;
  stroke: var(--b2b-header-text, #fff) !important;
}

/* 3a) SparkLayer widget: normalize internal stack so height is consistent
   - Reserve space for the optional one-line helper (e.g., "Qty rules apply") */
.card--product .sprkl-product-card { display: flex; flex-direction: column; gap: .5rem; }
.card--product .sprkl-product-card [class*="qty"][class*="rule"],
.card--product .sprkl-product-card [data-sprkl*="qty"],
.card--product .sprkl-product-card .sl-qty,
.card--product .sprkl-product-card .sl-qty-note,
.card--product .sprkl-product-card .sl-qty-rules {
  min-height: 1.25rem; /* one text line; keeps CTAs aligned when the note is absent */
  line-height: 1.25;
}
.card--product .sprkl-product-card .button,
.card--product .sprkl-product-card .button--primary { width: 100%; }

.card--product .sprkl-product-card,
.card--product .quick-add,
.card--product form[action*="/cart/add"],
.card--product .card__cta,
.card--product .button--full-width { margin-top: auto; }

/* Ensure Quick Add shows on collection templates */
.template-collection .quick-add,
.template-collection .quick-add__submit,
.collection .quick-add,
.collection .quick-add__submit {
  display: inline-flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Keep Quick Add visible for wholesale customers too */
body.b2b.template-collection .quick-add,
body.b2b .template-collection .quick-add__submit {
  display: inline-flex !important;
}
